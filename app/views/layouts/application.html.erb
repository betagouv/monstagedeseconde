<!DOCTYPE html>
<html lang="fr" data-rf-theme='light'>
  <head>
    <% if content_for?(:canonical_url) %>
      <link rel='canonical' href='<%= yield(:canonical_url) %>' />
    <% end %>
    <title><%= page_title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="turbo-cache-control" content="no-cache">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= action_cable_meta_tag %>
    <meta name="turbo-visit-control" content="reload">
    <%if Rails.env.production? %>
      <%= favicon_link_tag asset_pack_path('media/images/favicon.png') %>
    <%elsif Rails.env.development? %>
      <%= favicon_link_tag asset_pack_path('media/images/favicons/favicon-development.png')  %>
    <%elsif Rails.env.review? %>
      <%= favicon_link_tag asset_pack_path('media/images/favicons/favicon-heroku.png') %>
    <%elsif Rails.env.staging? %>
      <%= favicon_link_tag asset_pack_path('media/images/favicons/favicon-staging.png')%>
    <%end%>
    <%= stylesheet_link_tag "https://unpkg.com/leaflet@1.8.0/dist/leaflet.css", media: "all" %>
    <%= vite_javascript_tag "application.js", defer: true, 'data-turbo-track': "reload" %>
    <%= javascript_include_tag "https://unpkg.com/leaflet@1.8.0/dist/leaflet.js", integrity: "sha384-4Dmmo81xejNChaqLOci80VhUcuEAD5pXpCtqtizmdgWEzdETh3zrJvzOhU4T79cN", crossorigin: "anonymous" %>
    <%= render partial: "layouts/analytics" %>
    <%= vite_client_tag %>
    <%= vite_javascript_tag 'application' %>
    <!--
      If using a TypeScript entrypoint file:
        vite_typescript_tag 'application'

      If using a .jsx or .tsx entrypoint, add the extension:
        vite_javascript_tag 'application.jsx'

      Visit the guide for more information: https://vite-ruby.netlify.app/guide/rails
    -->

  </head>

  <body class="<%= env_class_name %> <%= body_class_name %>">
    <a name="top" id="top"></a>
    <div class="content pt-0" data-controller='rg2a'>
      <header role="banner" class="custom-navbar">
        <div class="col px-0">
          <%= render "layouts/navbar" %>
        </div>
      </header>

      <% if homepage? || statistics? %>
        <%= render 'layouts/flash' %>
        <main role="main"><%= yield %></main>
      <% else %>
        <% if content_for?(:custom_header) %> <%= content_for(:custom_header) %> <% end %>
        <div class="container-monstage">
          <%= render 'layouts/flash' %>
          <div role="main"><%= yield %></div>
        </div>
      <% end %>
    </div>

    <div class="<%= agreement_form? ? "d-none" : "" %>"  >
      <%= render 'layouts/footer' %>
    </div>

    <dialog id="turbo-confirm">
      <form method="dialog">
        <p>En êtes-vous sûr ?</p>
        <div>
          <button value="cancel">Annuler</button>
          <button value="confirm">Confirmer</button>
        </div>
      </form>
    </dialog>
    <% if current_user && current_user.pending_invitation_to_a_team.present? %>
      <%= render 'dashboard/team_member_invitations/dialog_form' %>
    <% end %>
  </body>
</html>
